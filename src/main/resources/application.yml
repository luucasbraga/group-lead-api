spring:
  application:
    name: group-lead-api

  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:5432/${DB_NAME:grouplead}
    username: ${DB_USER:grouplead}
    password: ${DB_PASSWORD:grouplead}
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        jdbc:
          time_zone: UTC
    open-in-view: false
    show-sql: false

  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      timeout: 2000ms

  cache:
    type: redis
    redis:
      time-to-live: 300000

  jackson:
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      fail-on-unknown-properties: false
    default-property-inclusion: non_null

# Integration configurations
integrations:
  jira:
    base-url: ${JIRA_BASE_URL:https://your-domain.atlassian.net}
    api-token: ${JIRA_API_TOKEN:}
    email: ${JIRA_EMAIL:}
    project-keys: ${JIRA_PROJECT_KEYS:PROJ,TEAM}
    board-id: ${JIRA_BOARD_ID:1}

  zoho:
    base-url: ${ZOHO_BASE_URL:https://desk.zoho.com}
    client-id: ${ZOHO_CLIENT_ID:}
    client-secret: ${ZOHO_CLIENT_SECRET:}
    refresh-token: ${ZOHO_REFRESH_TOKEN:}

  gitlab:
    base-url: ${GITLAB_BASE_URL:https://gitlab.com}
    private-token: ${GITLAB_PRIVATE_TOKEN:}
    project-ids: ${GITLAB_PROJECT_IDS:}

  aws:
    region: ${AWS_REGION:us-east-1}
    access-key: ${AWS_ACCESS_KEY:}
    secret-key: ${AWS_SECRET_KEY:}
    cloudwatch:
      namespaces: AWS/EC2,AWS/RDS,AWS/ELB,Custom/Application

# AI Configuration
ai:
  provider: ${AI_PROVIDER:claude}
  claude:
    api-key: ${CLAUDE_API_KEY:}
    model: ${CLAUDE_MODEL:claude-sonnet-4-20250514}
    max-tokens: ${CLAUDE_MAX_TOKENS:4096}
  openai:
    api-key: ${OPENAI_API_KEY:}
    model: ${OPENAI_MODEL:gpt-4-turbo}

  features:
    predictions-enabled: ${AI_PREDICTIONS_ENABLED:true}
    anomaly-detection-enabled: ${AI_ANOMALY_DETECTION_ENABLED:true}
    chat-enabled: ${AI_CHAT_ENABLED:true}
    burnout-detection-enabled: ${AI_BURNOUT_DETECTION_ENABLED:true}

# Scheduler Configuration
scheduler:
  enabled: ${SCHEDULER_ENABLED:true}
  data-collection:
    jira-cron: "0 */15 * * * *"
    zoho-cron: "0 */15 * * * *"
    gitlab-cron: "0 */10 * * * *"
    cloudwatch-cron: "0 */5 * * * *"

  aggregation:
    hourly-cron: "0 0 * * * *"
    daily-cron: "0 0 1 * * *"
    weekly-cron: "0 0 2 * * MON"

  ai-insights:
    sprint-summary-cron: "0 0 9 * * MON"
    anomaly-check-cron: "0 */30 * * * *"

# Alert Configuration
alerts:
  thresholds:
    latency-p99-ms: ${ALERT_LATENCY_P99_MS:500}
    error-rate-percent: ${ALERT_ERROR_RATE_PERCENT:1.0}
    cpu-percent: ${ALERT_CPU_PERCENT:80}
    memory-percent: ${ALERT_MEMORY_PERCENT:85}
    deployment-failure-rate: ${ALERT_DEPLOYMENT_FAILURE_RATE:0.1}

  notifications:
    slack-webhook: ${SLACK_WEBHOOK_URL:}
    email-enabled: ${ALERT_EMAIL_ENABLED:false}
    email-recipients: ${ALERT_EMAIL_RECIPIENTS:}

# Security Configuration
security:
  jwt:
    secret: ${JWT_SECRET:myDefaultSecretKeyForDevelopmentOnlyPleaseChangeInProduction123456}
    expiration-hours: ${JWT_EXPIRATION_HOURS:24}
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}

# Server Configuration
server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /api
  compression:
    enabled: true
    mime-types: application/json,application/xml,text/html,text/xml,text/plain

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when_authorized
      probes:
        enabled: true

# Logging Configuration
logging:
  level:
    com.grouplead: ${LOG_LEVEL:INFO}
    org.springframework.web: INFO
    org.springframework.security: INFO
    org.hibernate.SQL: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# OpenAPI/Swagger Configuration
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    operationsSorter: method
